{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mi PC\\\\Desktop\\\\Food Recetas\\\\Food_Recipes\\\\client\\\\src\\\\components\\\\RecipeCreate.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { postRecipe } from \"../actions\";\nimport { useDispatch, useSelector } from \"react-redux\"; //import styles from \"../Styles/CreateRecipe.module.css\"\n\nimport '../styles/Buttons.css';\nimport NavBar from '../components/NavBar';\nimport { Grid, CardMedia, Box, Typography, Divider } from '@mui/material';\nimport { TextField, Select, Container, UploadOulined, InputLabel, OutlinedInput, InputAdornment, MenuItem, Button, FormLabel, FormControlLabel } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction validate(post) {\n  let errors = {};\n\n  if (!post.title) {\n    //si no hay nada\n    errors.title = \"Tu receta necesita un titulo\";\n  } else if (!post.summary) {\n    //si no hay nada\n    errors.summary = \"Brinda una pequeña descripcion de tu receta\";\n  } else if (!post.instructions) {\n    //si no hay nada\n    errors.instructions = \"No te olvides de contar como la preparaste\";\n  }\n\n  return errors;\n}\n\nexport default function RecipeCreate() {\n  _s();\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const allDiets = useSelector(state => state.diets);\n  const [errors, setErrors] = useState({}); //estado local para manejar errores\n\n  const [images, setImages] = React.useState([]); //array de strings de url de imagenes \n\n  const [upLoading, setUpLoading] = React.useState(false); //estado que sirve para mostrar \"cargando foto\"\n\n  const [post, setPost] = useState({\n    title: \"\",\n    summary: \"\",\n    spoonacularScore: 50,\n    healthScore: 50,\n    instructions: \"\",\n    image: \"\",\n    diets: []\n  });\n\n  const handleUploadPicture = e => {\n    const pics = e.target.files;\n    if (pics[0] === undefined) return 0;\n    setUpLoading(true); //marcador de loading...\n\n    for (const pic of pics) {\n      let formData = new FormData();\n      formData.append('file', pic);\n      formData.append('upload_preset', 'images');\n      fetch('https://api.cloudinary.com/v1_1/dnlooxokf/upload', {\n        method: 'POST',\n        body: formData\n      }).then(res => res.json()).then(res => {\n        setImages(images => [...images, res.url]);\n        setUpLoading(false);\n      }).catch(error => console.log(error));\n    }\n  };\n\n  function handleChange(e) {\n    setPost({ //a mendida que escribo setea y va guardando\n      ...post,\n      [e.target.name]: e.target.value //va llenando el estado post a medida que va modificando\n\n    });\n    setErrors(validate({ ...post,\n      [e.target.name]: e.target.value\n    }));\n  }\n\n  function handleSelect(e) {\n    setPost({ ...post,\n      diets: [...post.diets, e.target.value] //guarda en un arreglo lo qe vaya seleccionando\n\n    });\n  }\n\n  function handleDietDelete(deleteThis) {\n    setPost({ ...post,\n      diets: post.diets.filter(diet => diet !== deleteThis)\n    });\n  }\n\n  function handleSubmit(e) {\n    if (!post.title || !post.summary) {\n      e.preventDefault();\n      return alert(\"La receta necesita un titulo y un resumen\");\n    } else if (!post.diets.length) {\n      e.preventDefault();\n      return alert(\"Necesitas agregar por lo menos 1 tipo de dieta a la receta\");\n    } else {\n      if (!post.image) {\n        post.image = \"https://cdn.pixabay.com/photo/2016/12/26/17/28/spaghetti-1932466_960_720.jpg\";\n      }\n\n      const newPost = {\n        title: post.title,\n        resumen: post.summary,\n        puntuacion: post.healthScore,\n        nivel: post.spoonacularScore,\n        pasoApaso: post.instructions,\n        imagen: post.image,\n        dieta: post.diets\n      };\n      dispatch(postRecipe(newPost));\n      alert(\"Se creo la receta exitosamente!\");\n      /*setPost({\r\n          title: \"\",\r\n          summary: \"\",\r\n          spoonacularScore: 50,\r\n          healthScore: 50,\r\n          instructions: \"\",\r\n          image: \"\",\r\n          diets: []\r\n      })*/\n\n      navigate(\"/home\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      marginTop: \"250px\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"CREA TU PROPIA RECETA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"formtitle\",\n          label: \"Nombre\",\n          variant: \"outlined\",\n          name: \"title\",\n          value: post.name,\n          onChange: e => validate(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: post.title,\n          name: \"title\",\n          onChange: e => handleChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), errors.title && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Resumen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          type: \"text\",\n          value: post.summary,\n          name: \"summary\",\n          maxLength: \"1000\",\n          onChange: e => handleChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), errors.summary && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.summary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Puntuacion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: \"100\",\n          value: post.spoonacularScore,\n          name: \"spoonacularScore\",\n          onChange: e => handleChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.spoonacularScore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nivel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: \"100\",\n          value: post.healthScore,\n          name: \"healthScore\",\n          onChange: e => handleChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.healthScore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Paso a paso\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          type: \"text\",\n          value: post.instructions,\n          name: \"instructions\",\n          onChange: e => handleChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), errors.instructions && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.instructions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Cargar url de la imagen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"url\",\n          value: post.image,\n          name: \"image\",\n          onChange: e => handleChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleSelect(e),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"all\",\n            hidden: true,\n            name: \"diets\",\n            children: \"Selecciona tipo de dieta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this), allDiets === null || allDiets === void 0 ? void 0 : allDiets.map(diet => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: diet.id,\n              children: diet.name\n            }, diet.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 38\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: /*#__PURE__*/_jsxDEV(\"li\", {\n            children: post.diets.map(diet => /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: diet\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDietDelete(diet),\n                children: \"x \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: e => handleSubmit(e),\n        children: \"Crear Receta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 9\n  }, this);\n} //  <p>{allDiets?.find(element => element.id === diet)?.name}</p>\n\n_s(RecipeCreate, \"H7p1iFs4mw8UoElBVXCcBMpcg2Q=\", false, function () {\n  return [useDispatch, useNavigate, useSelector];\n});\n\n_c = RecipeCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecipeCreate\");","map":{"version":3,"sources":["C:/Users/Mi PC/Desktop/Food Recetas/Food_Recipes/client/src/components/RecipeCreate.jsx"],"names":["React","useState","useEffect","Link","useNavigate","postRecipe","useDispatch","useSelector","NavBar","Grid","CardMedia","Box","Typography","Divider","TextField","Select","Container","UploadOulined","InputLabel","OutlinedInput","InputAdornment","MenuItem","Button","FormLabel","FormControlLabel","validate","post","errors","title","summary","instructions","RecipeCreate","dispatch","navigate","allDiets","state","diets","setErrors","images","setImages","upLoading","setUpLoading","setPost","spoonacularScore","healthScore","image","handleUploadPicture","e","pics","target","files","undefined","pic","formData","FormData","append","fetch","method","body","then","res","json","url","catch","error","console","log","handleChange","name","value","handleSelect","handleDietDelete","deleteThis","filter","diet","handleSubmit","preventDefault","alert","length","newPost","resumen","puntuacion","nivel","pasoApaso","imagen","dieta","map","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link ,  useNavigate } from \"react-router-dom\"\r\nimport { postRecipe } from \"../actions\"\r\nimport { useDispatch , useSelector } from \"react-redux\"\r\n//import styles from \"../Styles/CreateRecipe.module.css\"\r\nimport '../styles/Buttons.css';\r\nimport NavBar from '../components/NavBar'\r\nimport { Grid,CardMedia, Box, Typography, Divider } from '@mui/material'\r\nimport { TextField,Select,Container, UploadOulined,InputLabel, OutlinedInput, InputAdornment, MenuItem, Button, FormLabel, FormControlLabel } from '@mui/material';\r\n\r\n\r\nfunction validate(post){\r\n    let errors = {}\r\n    if (!post.title){ //si no hay nada\r\n        errors.title = \"Tu receta necesita un titulo\"\r\n    } else if (!post.summary){ //si no hay nada\r\n        errors.summary = \"Brinda una pequeña descripcion de tu receta\"\r\n    } else if (!post.instructions){ //si no hay nada\r\n        errors.instructions = \"No te olvides de contar como la preparaste\"\r\n    }\r\n    return errors\r\n}\r\n\r\n    \r\nexport default function RecipeCreate(){\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate()\r\n    const allDiets = useSelector((state) => state.diets)\r\n    const [errors, setErrors] = useState({}) //estado local para manejar errores\r\n    const[images,setImages]=React.useState([]);//array de strings de url de imagenes \r\n    const[upLoading,setUpLoading]=React.useState(false) //estado que sirve para mostrar \"cargando foto\"\r\n  \r\n    const [post, setPost] = useState({\r\n        title: \"\",\r\n        summary: \"\",\r\n        spoonacularScore: 50,\r\n        healthScore: 50,\r\n        instructions: \"\",\r\n        image: \"\",\r\n        diets: []  \r\n    })\r\n\r\n    const handleUploadPicture=  (e)=>{\r\n      const pics = e.target.files;\r\n      if (pics[0]===undefined)  return  0\r\n  \r\n      setUpLoading(true); //marcador de loading...\r\n     \r\n      for(const pic of pics){\r\n        let formData=new FormData();\r\n        formData.append('file',pic);\r\n        formData.append('upload_preset','images');\r\n         fetch('https://api.cloudinary.com/v1_1/dnlooxokf/upload',{\r\n          method: 'POST',\r\n          body: formData,\r\n        })\r\n          .then((res)=>res.json())\r\n          .then((res)=> {\r\n            setImages(images=>[...images,res.url]);\r\n            setUpLoading(false);\r\n          })\r\n          .catch(error=>console.log(error));\r\n        }\r\n    };\r\n\r\n\r\n    function handleChange(e){\r\n        setPost({ //a mendida que escribo setea y va guardando\r\n            ...post,\r\n            [e.target.name]: e.target.value //va llenando el estado post a medida que va modificando\r\n        })\r\n        setErrors(validate({\r\n            ...post,\r\n            [e.target.name]: e.target.value\r\n        }))\r\n    }\r\n\r\n    function handleSelect(e){\r\n        setPost({\r\n            ...post,\r\n            diets: [...post.diets, e.target.value] //guarda en un arreglo lo qe vaya seleccionando\r\n        })\r\n\r\n    }\r\n\r\n    function handleDietDelete(deleteThis){\r\n        setPost({\r\n            ...post,\r\n            diets: post.diets.filter(diet => diet !== deleteThis)\r\n        })\r\n    }\r\n\r\n    function handleSubmit(e){\r\n        if(!post.title || !post.summary){\r\n            e.preventDefault()\r\n            return alert(\"La receta necesita un titulo y un resumen\")\r\n        } else if(!post.diets.length){\r\n            e.preventDefault()\r\n            return alert(\"Necesitas agregar por lo menos 1 tipo de dieta a la receta\")\r\n        } else {\r\n            if (!post.image) {\r\n                post.image = \"https://cdn.pixabay.com/photo/2016/12/26/17/28/spaghetti-1932466_960_720.jpg\"\r\n            }\r\n            const newPost={\r\n                title: post.title,\r\n                resumen: post.summary,\r\n                puntuacion: post.healthScore,\r\n                nivel: post.spoonacularScore,\r\n                pasoApaso: post.instructions,\r\n                imagen: post.image,\r\n                dieta: post.diets\r\n            }\r\n            dispatch(postRecipe(newPost))\r\n            alert(\"Se creo la receta exitosamente!\")\r\n            /*setPost({\r\n                title: \"\",\r\n                summary: \"\",\r\n                spoonacularScore: 50,\r\n                healthScore: 50,\r\n                instructions: \"\",\r\n                image: \"\",\r\n                diets: []\r\n            })*/\r\n            navigate(\"/home\")\r\n        }\r\n    }\r\n\r\n\r\n    return(\r\n        <div >\r\n\r\n            <NavBar />\r\n            <Box marginTop='250px'/>\r\n            <h1 >CREA TU PROPIA RECETA</h1>\r\n            <form >\r\n                <div >\r\n\r\n                <TextField id=\"formtitle\" label=\"Nombre\" variant=\"outlined\" name='title' value={post.name}\r\n            onChange={(e)=>validate(e)}/>\r\n                    <label >Title</label>\r\n                    <input  type=\"text\" value={post.title} name=\"title\" onChange={(e) => handleChange(e)} ></input>\r\n                    {errors.title && (<p >{errors.title}</p>)}\r\n                </div>\r\n                <div >\r\n                    <label >Resumen</label>\r\n                    <textarea  type=\"text\" value={post.summary} name=\"summary\" maxLength=\"1000\" onChange={(e) => handleChange(e)}></textarea>\r\n                    {errors.summary && (<p >{errors.summary}</p>)}\r\n                </div>\r\n                <div >\r\n                    <label >Puntuacion</label>\r\n                    <input  type=\"range\" min=\"0\" max=\"100\" value={post.spoonacularScore} name=\"spoonacularScore\" onChange={(e) => handleChange(e)}></input>\r\n                    {<p >{post.spoonacularScore}</p>}\r\n                </div>\r\n                <div >\r\n                    <label >Nivel</label>\r\n                    <input  type=\"range\" min=\"0\" max=\"100\" value={post.healthScore} name=\"healthScore\" onChange={(e) => handleChange(e)}></input>\r\n                    {<p >{post.healthScore}</p>}\r\n                </div>\r\n                <div >\r\n                    <label >Paso a paso</label>\r\n                    <textarea  type=\"text\" value={post.instructions} name=\"instructions\" onChange={(e) => handleChange(e)}></textarea>\r\n                    {errors.instructions && (<p >{errors.instructions}</p>)}\r\n                </div>\r\n                <div >\r\n                    <label >Cargar url de la imagen</label>\r\n                    <input  type=\"url\" value={post.image} name=\"image\" onChange={(e) => handleChange(e)}></input>\r\n                </div>\r\n                <div >\r\n                    <select onChange={(e)=> handleSelect(e)}>\r\n                        <option value=\"all\" hidden name=\"diets\" >Selecciona tipo de dieta</option>\r\n                            {allDiets?.map(diet => {\r\n                            return ( <option value={diet.id} key={diet.id}>{diet.name}</option>)\r\n                            })\r\n                            } \r\n                    </select>\r\n                    <ul>\r\n                        <li>                            \r\n                            {post.diets.map(diet => \r\n                            <div >\r\n                                <p>{diet}</p>\r\n                                <button onClick={() => handleDietDelete(diet)}>x </button>\r\n                            </div>\r\n                            )}\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <button  type=\"submit\" onClick={(e) => handleSubmit(e)}>Crear Receta</button>\r\n            </form>\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n\r\n//  <p>{allDiets?.find(element => element.id === diet)?.name}</p>"]},"metadata":{},"sourceType":"module"}